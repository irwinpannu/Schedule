<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Booking Calendar</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Book a 10-Minute Slot</h1>
        <form id="bookingForm" action="">
            <label for="date">Choose Date:</label>
            <input type="date" id="date" required>
            <label for="time">Choose Time:</label>
            <select id="time" required>
                <!-- Times will be generated by JavaScript -->
            </select>
            <label for="name">Your Name:</label>
            <input type="text" id="name" required>
            <label for="email">Your Email:</label>
            <input type="email" id="email" required>
            <label for="purpose">Purpose:</label>
            <input type="text" id="purpose" required>
            <button type="submit">Book Slot</button>
        </form>
        <div id="confirmationMessage"></div>
    </div>
    <script src="app.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
    const form = document.getElementById("bookingForm");
    const timeSelect = document.getElementById("time");

    // Generate time slots from 7:00 AM to 9:00 PM in 10-minute intervals
    for (let hour = 7; hour < 21; hour++) {
        for (let min = 0; min < 60; min += 10) {
            const time = `${String(hour).padStart(2, "0")}:${String(min).padStart(2, "0")}`;
            const option = document.createElement("option");
            option.value = time;
            option.textContent = time;
            timeSelect.appendChild(option);
        }
    }

    form.addEventListener("submit", async (e) => {
        e.preventDefault();
        
        const bookingData = {
            date: document.getElementById("date").value,
            time: document.getElementById("time").value,
            name: document.getElementById("name").value,
            email: document.getElementById("email").value,
            purpose: document.getElementById("purpose").value,
        };

        try {
            const response = await fetch("/api/book", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(bookingData),
            });

            const result = await response.json();
            document.getElementById("confirmationMessage").textContent = result.message;
        } catch (error) {
            console.error("Error:", error);
        }
    });
});
    </script>
</body>
</html>
